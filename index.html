<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Js-geolocation by gpanther</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Js-geolocation</h1>
        <p>A client-side geolocation service</p>
        <p class="view"><a href="https://github.com/gpanther/js-geolocation">View the Project on GitHub <small>gpanther/js-geolocation</small></a></p>
        <ul>
          <li><a href="https://github.com/gpanther/js-geolocation">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="js-geolocation" class="anchor" href="#js-geolocation" aria-hidden="true"><span class="octicon octicon-link"></span></a>js-geolocation</h1>

<p>A client-side geolocation service which using Google's services.</p>

<h2>When to use it?</h2>

<p>If you need geolocation data in your client applications and you are targeting browsers where <a href="http://html5demos.com/geo">the geolocation API</a>
is not available (see <a href="http://caniuse.com/geolocation">canisue.com</a> for a quick overview of its availability).</p>

<p>IP geolocation can give false results if the user is coming through a proxy / VPN / NAT service - in this case it will "locate" the exit point. Don't take the results of the API as absolute proof about the user's location!</p>

<p>If you have a list of IPs for which you need to retrieve their approximate physical location, use something like the <a href="https://www.maxmind.com/en/geoip2-databases">MaxMind GeoIP database</a> which is also available in a <a href="http://dev.maxmind.com/geoip/geoip2/geolite2/">free version</a>. Just remember that IP blocks get reassigned all the time so you should get a version of the database "close" (in time) to when those IPs were collected.</p>

<h2>Caveat emptor!</h2>

<p>This is a free service and while I'm happy to provide some small funding to it, if you use it commercially, please support me through PayPal or Flattr:</p>

<table>
<tr>

<td style="text-align: center">
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="CMPUTSBXPD8HQ">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>
</td>

<td style="text-align: center">
<script id='fbeom66'>(function(i){var f,s=document.getElementById(i);f=document.createElement('iframe');f.src='//button.flattr.com/view/?fid=1y32j1&url='+encodeURIComponent(document.URL);f.title='Flattr';f.height=62;f.width=55;f.style.borderWidth=0;s.parentNode.insertBefore(f,s);})('fbeom66');</script>
</td>

</table>

<h2>How to use it?</h2>

<p>Call the following endpoints (using <a href="https://api.jquery.com/jquery.ajax/">jQuery.ajax</a> or equivalent mechanisms):</p>

<pre><code><a href="https://eu-js-geolocation.appspot.com/api/geolocation?format=json" target="_blank">https://eu-js-geolocation.appspot.com/api/geolocation?format=json</a></code></pre>

<p>This gives the geolocation for caller's (external) IP in the following format:</p>

<pre><code>
{
    "city":"cluj-napoca",
    "cityLatLong":{
        "lat":46.777248,
        "long":23.59989
    },
    "country":"RO",
    "region":"cj"
}
</code></pre>

<p>There is also an API to return the caller's external IP:</p>

<pre><code><a href="https://eu-js-geolocation.appspot.com/api/ip?format=json" target="_blank">https://eu-js-geolocation.appspot.com/api/ip?format=json</a></code></pre>

<p>This returns:</p>

<pre><code>
{
    "ip":"128.96.11.38"
}
</pre></code>

<p>In addition to JSON the service also supports JSONP. To use it specify <code>?format=jsonp&amp;callback=callback_name</code> (callback name can contain uppercase and lowercase letters and numbers). For example <a href="https://eu-js-geolocation.appspot.com/api/ip?format=jsonp&callback=test" target="_blank">https://eu-js-geolocation.appspot.com/api/ip?format=jsonp&callback=test</a> will reply with something like:</p>

<pre><code>
test({"ip":"128.96.11.38"});
</pre></code>

<p>The application has two instances deployed and depending where you anticipate most of your visitors coming from you should either use:</p>

<ul>
<li>The US instance: <a href="https://us-js-geolocation.appspot.com">https://us-js-geolocation.appspot.com</a></li>
<li>The EU instance: <a href="https://eu-js-geolocation.appspot.com">https://eu-js-geolocation.appspot.com</a></li>
</ul>

<h2>More technical details</h2>

<ul>
<li>The application is implemented in <a href="https://golang.org/">Go</a> and deployed on <a href="https://cloud.google.com/appengine">Google App Engine</a></li>
<li>The app is free/libre software and the complete source code is available under AGPLv3 license on <a href="https://github.com/gpanther/js-geolocation">GitHub</a>.</li>
<li>The geolocation database is maintained by Google so you can be assured that you always get high-quality results.</li>
<li>The application emmits the <a href="http://enable-cors.org/">CORS headers</a> needed to be used.</li>
<li>The application asks the client to cache the query results for 1 hour to ease the load.</li>
<li>Credit goes <a href="http://code.jbarker.com/">Jay Barker</a> for his <a href="https://github.com/jbarker/gae-ip-geolocation">gae-ip-geolocation</a> project which served as inspiration for this project.</li>
</ul>

      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/gpanther">gpanther</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72062732-1', 'auto');
  ga('send', 'pageview');

</script>
    
  </body>
</html>
